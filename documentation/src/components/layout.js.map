{"version":3,"file":"layout.js","sourceRoot":"","sources":["layout.ts"],"names":[],"mappings":"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","sourcesContent":["/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {\n    html,\n    CSSResultArray,\n    property,\n    SpectrumElement,\n    PropertyValues,\n    TemplateResult,\n} from '@spectrum-web-components/base';\nimport '@spectrum-web-components/theme/sp-theme.js';\nimport '@spectrum-web-components/theme/src/themes.js';\nimport { Color, Scale } from '@spectrum-web-components/theme';\nimport './side-nav.js';\nimport layoutStyles from './layout.css';\nimport '@spectrum-web-components/field-label/sp-field-label.js';\nimport { Picker } from '@spectrum-web-components/picker';\nimport '@spectrum-web-components/picker/sp-picker.js';\nimport '@spectrum-web-components/menu/sp-menu.js';\nimport '@spectrum-web-components/menu/sp-menu-item.js';\nimport '@spectrum-web-components/action-button/sp-action-button.js';\nimport '@spectrum-web-components/toast/sp-toast.js';\n\nconst SWC_THEME_COLOR_KEY = 'swc-docs:theme:color';\nconst SWC_THEME_SCALE_KEY = 'swc-docs:theme:scale';\nconst SWC_THEME_DIR_KEY = 'swc-docs:theme:dir';\nconst COLOR_FALLBACK = matchMedia('(prefers-color-scheme: dark)').matches\n    ? 'dark'\n    : 'light';\nconst SCALE_MEDIUM = 'medium';\nconst DIR_FALLBACK = 'ltr';\nconst DEFAULT_COLOR = (window.localStorage\n    ? localStorage.getItem(SWC_THEME_COLOR_KEY) || COLOR_FALLBACK\n    : COLOR_FALLBACK) as Color;\nconst DEFAULT_SCALE = (window.localStorage\n    ? localStorage.getItem(SWC_THEME_SCALE_KEY) || SCALE_MEDIUM\n    : SCALE_MEDIUM) as Scale;\nconst DEFAULT_DIR = (window.localStorage\n    ? localStorage.getItem(SWC_THEME_DIR_KEY) || DIR_FALLBACK\n    : DIR_FALLBACK) as 'ltr' | 'rtl';\n\nconst isNarrowMediaQuery = matchMedia('screen and (max-width: 960px)');\n\nexport interface TrackTheme {\n    callback: (color: Color) => void;\n}\n\nexport class LayoutElement extends SpectrumElement {\n    public static get styles(): CSSResultArray {\n        return [layoutStyles];\n    }\n\n    @property({ attribute: false })\n    private alerts: Map<\n        HTMLElement,\n        {\n            count: number;\n            message: string;\n            element: (count: number, message: string) => TemplateResult;\n        }\n    > = new Map();\n\n    @property({ attribute: false })\n    public color: Color = DEFAULT_COLOR;\n\n    @property({ reflect: true })\n    public dir: 'ltr' | 'rtl' = DEFAULT_DIR;\n\n    @property({ type: Boolean })\n    public open = false;\n\n    @property({ type: Boolean, attribute: false })\n    private isNarrow = isNarrowMediaQuery.matches;\n\n    @property({ attribute: false })\n    public scale: Scale = DEFAULT_SCALE;\n\n    private _themeTrackers = new Map<HTMLElement, TrackTheme['callback']>();\n\n    handleMatchMediaChange = (event: MediaQueryListEvent) => {\n        this.isNarrow = event.matches;\n    };\n\n    toggleNav() {\n        this.open = !this.open;\n    }\n\n    closeNav() {\n        this.open = false;\n    }\n\n    private updateColor(event: Event) {\n        this.color = (event.target as Picker).value as Color;\n        this._themeTrackers.forEach((tracker) => tracker(this.color));\n    }\n\n    private updateScale(event: Event) {\n        this.scale = (event.target as Picker).value as Scale;\n    }\n\n    private updateDirection(event: Event) {\n        const dir = (event.target as Picker).value;\n        this.dir = dir === 'rtl' ? dir : 'ltr';\n    }\n\n    private handleTrackTheme(event: CustomEvent<TrackTheme>): void {\n        const target = event.composedPath()[0] as HTMLElement;\n        if (this._themeTrackers.has(target)) {\n            this._themeTrackers.delete(target);\n        } else {\n            this._themeTrackers.set(target, event.detail.callback);\n            const callback = this._themeTrackers.get(target);\n            if (callback) {\n                callback(this.color);\n            }\n        }\n    }\n\n    private addAlert(event: CustomEvent<{ message: string }>): void {\n        const target = event.composedPath()[0] as HTMLElement;\n        if (!this.alerts.has(target)) {\n            const close = () => {\n                this.alerts.delete(target);\n                target.focus();\n                this.requestUpdate();\n            };\n            this.alerts.set(target, {\n                count: 0,\n                message: '',\n                /**\n                 * <sp-toast> does not allow a `timeout` of less that 6000\n                 * use this as a cheat to reset the timeout to 6000 for\n                 * every additional alert.\n                 */\n\n                element: (count: number, message: string) => html`\n                    <sp-toast\n                        .timeout=${count}\n                        variant=\"info\"\n                        @close=${close}\n                        open\n                    >\n                        ${message} ${count > 1 ? `(${count} alerts)` : ''}\n                    </sp-toast>\n                `,\n            });\n        }\n        const alert = this.alerts.get(target);\n        this.alerts.set(target, {\n            element: alert!.element,\n            count: alert!.count + 1,\n            message: event.detail.message,\n        });\n        this.requestUpdate();\n    }\n\n    renderContent() {\n        return html`\n            <div></div>\n        `;\n    }\n\n    render() {\n        return html`\n            <sp-theme\n                color=${this.color}\n                scale=${this.scale}\n                dir=${this.dir}\n                id=\"app\"\n                @sp-track-theme=${this.handleTrackTheme}\n            >\n                <header>\n                    <sp-action-button\n                        quiet\n                        label=\"Open Navigation\"\n                        @click=${this.toggleNav}\n                    >\n                        <svg\n                            slot=\"icon\"\n                            viewBox=\"0 0 36 36\"\n                            focusable=\"false\"\n                            aria-hidden=\"true\"\n                            width=\"22\"\n                            height=\"22\"\n                            fill=\"currentColor\"\n                        >\n                            <rect\n                                height=\"4\"\n                                rx=\"1\"\n                                ry=\"1\"\n                                width=\"28\"\n                                x=\"4\"\n                                y=\"16\"\n                            ></rect>\n                            <rect\n                                height=\"4\"\n                                rx=\"1\"\n                                ry=\"1\"\n                                width=\"28\"\n                                x=\"4\"\n                                y=\"6\"\n                            ></rect>\n                            <rect\n                                height=\"4\"\n                                rx=\"1\"\n                                ry=\"1\"\n                                width=\"28\"\n                                x=\"4\"\n                                y=\"26\"\n                            ></rect>\n                        </svg>\n                    </sp-action-button>\n                </header>\n                <div id=\"body\">\n                    <docs-side-nav\n                        id=\"side-nav\"\n                        ?inert=${this.isNarrow && !this.open}\n                        ?open=${this.open}\n                        @close=${this.closeNav}\n                    ></docs-side-nav>\n                    <main\n                        id=\"layout-content\"\n                        ?inert=${this.isNarrow && this.open}\n                        role=\"main\"\n                    >\n                        <div id=\"page\" @alert=${this.addAlert}>\n                            <div class=\"manage-theme\">\n                                <sp-field-label\n                                    for=\"theme-color\"\n                                    side-aligned=\"start\"\n                                >\n                                    Theme\n                                </sp-field-label>\n                                <sp-picker\n                                    id=\"theme-color\"\n                                    placement=\"bottom\"\n                                    quiet\n                                    value=${this.color}\n                                    @change=${this.updateColor}\n                                >\n                                    <sp-menu-item value=\"lightest\">\n                                        Lightest\n                                    </sp-menu-item>\n                                    <sp-menu-item value=\"light\">\n                                        Light\n                                    </sp-menu-item>\n                                    <sp-menu-item value=\"dark\">\n                                        Dark\n                                    </sp-menu-item>\n                                    <sp-menu-item value=\"darkest\">\n                                        Darkest\n                                    </sp-menu-item>\n                                </sp-picker>\n                                <sp-field-label\n                                    for=\"theme-scale\"\n                                    side-aligned=\"start\"\n                                >\n                                    Scale\n                                </sp-field-label>\n                                <sp-picker\n                                    id=\"theme-scale\"\n                                    label=\"Scale\"\n                                    placement=\"bottom\"\n                                    quiet\n                                    value=${this.scale}\n                                    @change=${this.updateScale}\n                                >\n                                    <sp-menu-item value=\"medium\">\n                                        Medium\n                                    </sp-menu-item>\n                                    <sp-menu-item value=\"large\">\n                                        Large\n                                    </sp-menu-item>\n                                </sp-picker>\n                                <sp-field-label\n                                    for=\"theme-direction\"\n                                    side-aligned=\"start\"\n                                >\n                                    Direction\n                                </sp-field-label>\n                                <sp-picker\n                                    id=\"theme-direction\"\n                                    label=\"Direction\"\n                                    placement=\"bottom\"\n                                    quiet\n                                    value=${this.dir}\n                                    @change=${this.updateDirection}\n                                >\n                                    <sp-menu-item value=\"ltr\">LTR</sp-menu-item>\n                                    <sp-menu-item value=\"rtl\">RTL</sp-menu-item>\n                                </sp-picker>\n                            </div>\n                            ${this.renderContent()}\n                        </div>\n                    </main>\n                </div>\n                ${this.alerts.size\n                    ? html`\n                          <div class=\"alerts\" role=\"region\">\n                              ${[...this.alerts.values()].map((alert) =>\n                                  alert.element(alert.count, alert.message)\n                              )}\n                          </div>\n                      `\n                    : html``}\n            </sp-theme>\n        `;\n    }\n\n    updated(changes: PropertyValues) {\n        if (changes.has('color') && window.localStorage) {\n            localStorage.setItem(SWC_THEME_COLOR_KEY, this.color);\n        }\n        if (changes.has('scale') && window.localStorage) {\n            localStorage.setItem(SWC_THEME_SCALE_KEY, this.scale);\n        }\n        if (changes.has('dir') && window.localStorage) {\n            localStorage.setItem(SWC_THEME_DIR_KEY, this.dir);\n        }\n    }\n\n    connectedCallback() {\n        super.connectedCallback();\n        import('./code-example.js');\n        isNarrowMediaQuery.addEventListener(\n            'change',\n            this.handleMatchMediaChange\n        );\n    }\n\n    disconnectedCallback() {\n        isNarrowMediaQuery.removeEventListener(\n            'change',\n            this.handleMatchMediaChange\n        );\n    }\n}\n"]}